<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AutoSix &mdash; pylhc_submitter 1.0.1 documentation</title>
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Job Submitter" href="job_submitter.html" />
    <link rel="prev" title="Welcome to the pylhc submitter documentation!" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/omc_logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Submitter</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">AutoSix</a></li>
<li class="toctree-l1"><a class="reference internal" href="job_submitter.html">Job Submitter</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/constants.html">Constants Definitions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/constants.html#constants-general">Constants: General</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/constants.html#constants-external-paths">Constants: External Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/constants.html#constants-autosix">Constants: Autosix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/htc.html">HTCondor Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/htc.html#htcondor-utilities">HTCondor Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/htc.html#mask-resolver">Mask Resolver</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/sixdesk_tools.html">Sixdesk Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/sixdesk_tools.html#create-sixdesk-workspace">Create SixDesk Workspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/sixdesk_tools.html#sixdesk-submission-utils">SixDesk Submission Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/sixdesk_tools.html#post-process-da">Post Process DA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/sixdesk_tools.html#sixdesk-utilities">SixDesk Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/sixdesk_tools.html#sixdesk-troubleshooting-tools">SixDesk Troubleshooting tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/utils.html">Utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/utils.html#io-tools">IO-Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/utils.html#logging-tools">Logging Tools</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pylhc_submitter</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>AutoSix</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/entrypoints/autosix.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <span class="target" id="module-pylhc_submitter.autosix"></span><section id="autosix">
<h1>AutoSix<a class="headerlink" href="#autosix" title="Permalink to this headline"></a></h1>
<p><code class="docutils literal notranslate"><span class="pre">AutoSix</span></code> is a wrapper to automatically perform the necessary setup and steps needed for <code class="docutils literal notranslate"><span class="pre">SixDesk</span></code> use.</p>
<p>The functionality is similar to the <code class="docutils literal notranslate"><span class="pre">pylhc_submitter.job_submitter</span></code> in that the inner product of a <code class="docutils literal notranslate"><span class="pre">replace_dict</span></code> is used to automatically create a set of job-directories to gather the data.
To avoid conflicts, each of these job-directories is a <code class="docutils literal notranslate"><span class="pre">SixDesk</span></code> workspace, meaning there can be only one study per directory.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">replace_dict</span></code> contains variables for your mask as well as variables for the SixDesk environment.
See the description of <code class="docutils literal notranslate"><span class="pre">replace_dict</span></code> below.</p>
<p>In any other way, these <em>special</em> variables behave like normal variables and can also be inserted in your mask.
They are also looped over in the same manner as any other variable (if given as a list).</p>
<p>For additional information and guides, see the <a class="reference external" href="https://pylhc.github.io/packages/pylhcsubmitter/autosix/">AutoSix page</a> in the <code class="docutils literal notranslate"><span class="pre">OMC</span></code> documentation site.</p>
<p>Arguments:</p>
<p><em>--Required--</em></p>
<ul>
<li><p><strong>mask</strong> <em>(PathOrStr)</em>:</p>
<blockquote>
<div><p>Program mask to use</p>
</div></blockquote>
</li>
<li><p><strong>replace_dict</strong> <em>(DictAsString)</em>:</p>
<blockquote>
<div><p>Dict with keys of the strings to be replaced in the mask (required) as
well as the mask_sixdeskenv and mask_sysenv files in the sixdesk_tools
module. Required fields are TURNS, AMPMIN, AMPMAX, AMPSTEP,
ANGLES. Optional fields are RESUBMISSION, PLATFORM, LOGLEVEL,
FIRSTSEED, LASTSEED, ENERGY, NPAIRS, EMITTANCE, DIMENSIONS, WRITEBINS.
These keys can also be used in the mask if needed. The values of this
dict are lists of values to replace these or single entries.</p>
</div></blockquote>
</li>
<li><p><strong>working_directory</strong> <em>(PathOrStr)</em>:</p>
<blockquote>
<div><p>Directory where data should be put</p>
</div></blockquote>
</li>
</ul>
<p><em>--Optional--</em></p>
<ul>
<li><p><strong>da_turnstep</strong> <em>(int)</em>:</p>
<blockquote>
<div><p>Step between turns used in DA-vs-Turns plot.</p>
<p>default: <code class="docutils literal notranslate"><span class="pre">100</span></code></p>
</div></blockquote>
</li>
<li><p><strong>executable</strong> <em>(PathOrStr)</em>:</p>
<blockquote>
<div><p>Path to executable.</p>
<p>default: <code class="docutils literal notranslate"><span class="pre">/afs/cern.ch/user/m/mad/bin/madx</span></code></p>
</div></blockquote>
</li>
<li><p><strong>apply_mad6t_hacks</strong>:</p>
<blockquote>
<div><p>Apply two hacks: Removes ‘&lt;’ in binary call and
ignore the check for ‘Twiss fail’ in the submission file.
This hack is needed in case this check greps the wrong lines,
e.g. in madx- comments. USE WITH CARE!!</p>
<p>action: <code class="docutils literal notranslate"><span class="pre">store_true</span></code></p>
</div></blockquote>
</li>
<li><p><strong>jobid_mask</strong> <em>(str)</em>:</p>
<blockquote>
<div><p>Mask to name jobs from replace_dict</p>
</div></blockquote>
</li>
<li><p><strong>python3</strong> <em>(PathOrStr)</em>:</p>
<blockquote>
<div><p>Path to python to use with sixdb (python3 with requirements
installed).</p>
<p>default: <code class="docutils literal notranslate"><span class="pre">python3</span></code></p>
</div></blockquote>
</li>
<li><p><strong>python2</strong> <em>(PathOrStr)</em>:</p>
<blockquote>
<div><p>Path to python to use with run_six.sh (python2 with requirements installed).
ONLY THE PATH TO THE DIRECTORY OF THE python BINARY IS NEEDED!
And it can’t be an Anaconda Distribution.</p>
<p>default: None (uses the first <code class="docutils literal notranslate"><span class="pre">python</span></code> in path)</p>
</div></blockquote>
</li>
<li><p><strong>resubmit</strong>:</p>
<blockquote>
<div><p>Resubmits if needed.</p>
<p>action: <code class="docutils literal notranslate"><span class="pre">store_true</span></code></p>
</div></blockquote>
</li>
<li><p><strong>ssh</strong> <em>(str)</em>:</p>
<blockquote>
<div><p>Run htcondor from this machine via ssh (needs access to the
<code class="docutils literal notranslate"><span class="pre">working_directory</span></code>)</p>
</div></blockquote>
</li>
<li><p><strong>stop_workspace_init</strong>:</p>
<blockquote>
<div><p>Stops the workspace creation before initialization, so one can make
manual changes.</p>
<p>action: <code class="docutils literal notranslate"><span class="pre">store_true</span></code></p>
</div></blockquote>
</li>
<li><p><strong>unlock</strong>:</p>
<blockquote>
<div><p>Forces unlocking of folders.</p>
<p>action: <code class="docutils literal notranslate"><span class="pre">store_true</span></code></p>
</div></blockquote>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">author</dt>
<dd class="field-odd"><p>jdilly</p>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="pylhc_submitter.autosix.main">
<span class="sig-prename descclassname"><span class="pre">pylhc_submitter.autosix.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">opt</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pylhc_submitter/autosix.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pylhc_submitter.autosix.main" title="Permalink to this definition"></a></dt>
<dd><p>Loop to create jobs from replace dict product matrix.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pylhc_submitter.autosix.setup_and_run">
<span class="sig-prename descclassname"><span class="pre">pylhc_submitter.autosix.</span></span><span class="sig-name descname"><span class="pre">setup_and_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">jobname</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">basedir</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pylhc_submitter/autosix.html#setup_and_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pylhc_submitter.autosix.setup_and_run" title="Permalink to this definition"></a></dt>
<dd><p>Main submitting procedure for single job.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jobname</strong> (<em>str</em>) -- Name of the job/study</p></li>
<li><p><strong>basedir</strong> (<em>Path</em>) -- Working directory</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Keyword Args (optional):</dt><dd><p>unlock (bool): unlock folder
ssh (str): ssh-server to use
python (str): python binary to use for sixDB
resubmit(bool): Resubmit jobs if checks fail
da_turnstep (int): Step in turns for DA
ignore_twissfail_check (bool): Hack to ignore check for ‘Twiss fail’ after run
max_stage (str): Last stage to run</p>
</dd>
<dt>Keyword Args (needed for create jobs):</dt><dd><p>mask_text (str): Content of the mask to use.
binary_path (Path): path to binary to use in jobs
All Key=Values needed to fill the mask!
All Key=Values needed to fill the mask!</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="Welcome to the pylhc submitter documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="job_submitter.html" class="btn btn-neutral float-right" title="Job Submitter" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2020, pyLHC/OMC-TEAM.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>